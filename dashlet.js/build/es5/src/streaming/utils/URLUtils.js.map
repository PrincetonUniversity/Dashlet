{"version":3,"sources":["../../../../../src/streaming/utils/URLUtils.js"],"names":["URLUtils","instance","defaultURLUtils","regexUtils","context","getUtils","url","i","length","regex","test","utils","setup","getInstance","registerUrlRegex","push","internalCall","functionName","baseUrl","parseBaseUrl","parseOrigin","removeHostname","parseScheme","isRelative","isPathAbsolute","isSchemeRelative","isHTTPURL","isHTTPS","resolve","__dashjs_factory_name","factory","FactoryMaker","getSingletonFactory"],"mappings":"sEA+BA,qD,yDACA,kD,kJAEA;;;;;;;GAlCA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;GA0CA,QAASA,SAAT,EAAoB,CAEhB,GAAIC,gBAAJ,CACA,GAAIC,uBAAJ,CACA,GAAIC,YAAa,EAAjB,CACA,GAAMC,SAAU,KAAKA,OAArB,CAEA,QAASC,SAAT,CAAkBC,GAAlB,CAAuB,CACnB,GAAIC,SAAJ,CACA,IAAKA,EAAI,CAAT,CAAYA,EAAIJ,WAAWK,MAA3B,CAAmCD,GAAnC,CAAwC,CACpC,GAAIE,OAAQN,WAAWI,CAAX,EAAcE,KAA1B,CACA,GAAIA,MAAMC,IAAN,CAAWJ,GAAX,CAAJ,CAAqB,CACjB,MAAOH,YAAWI,CAAX,EAAcI,KAArB,CACH,CACJ,CACD,MAAOT,gBAAP,CACH,CAED,QAASU,MAAT,EAAiB,CACbV,gBAAkB,8BAAgBE,OAAhB,EAAyBS,WAAzB,EAAlB,CACH,CAED;;;;;;OAOA,QAASC,iBAAT,CAA0BL,KAA1B,CAAiCE,KAAjC,CAAwC,CACpCR,WAAWY,IAAX,CAAgB,CAACN,MAAOA,KAAR,CAAeE,MAAOA,KAAtB,CAAhB,EACH,CAED,QAASK,aAAT,CAAsBC,YAAtB,CAAoCX,GAApC,CAAyCY,OAAzC,CAAkD,CAC9C,GAAIP,OAAQN,SAASa,SAAWZ,GAApB,CAAZ,CACA,MAAOK,QAAS,MAAQA,OAAMM,YAAN,CAAR,GAAiC,UAA1C,CAAuDN,MAAMM,YAAN,EAAoBX,GAApB,CAAyBY,OAAzB,CAAvD,CAA2FhB,gBAAgBe,YAAhB,EAA8BX,GAA9B,CAAmCY,OAAnC,CAAlG,CACH,CAED;;;;;;OAOA,QAASC,aAAT,CAAsBb,GAAtB,CAA2B,CACvB,MAAOU,cAAa,cAAb,CAA6BV,GAA7B,CAAP,CACH,CAED;;;;;;;OAQA,QAASc,YAAT,CAAqBd,GAArB,CAA0B,CACtB,MAAOU,cAAa,aAAb,CAA4BV,GAA5B,CAAP,CACH,CAED;;;;;;;OAQA,QAASe,eAAT,CAAwBf,GAAxB,CAA6B,CACzB,MAAOU,cAAa,gBAAb,CAA+BV,GAA/B,CAAP,CACH,CAED;;;;;;OAOA,QAASgB,YAAT,CAAqBhB,GAArB,CAA0B,CACtB,MAAOU,cAAa,aAAb,CAA4BV,GAA5B,CAAP,CACH,CAED;;;;;;OAOA,QAASiB,WAAT,CAAoBjB,GAApB,CAAyB,CACrB,MAAOU,cAAa,YAAb,CAA2BV,GAA3B,CAAP,CACH,CAED;;;;;;OAOA,QAASkB,eAAT,CAAwBlB,GAAxB,CAA6B,CACzB,MAAOU,cAAa,gBAAb,CAA+BV,GAA/B,CAAP,CACH,CAED;;;;;;OAOA,QAASmB,iBAAT,CAA0BnB,GAA1B,CAA+B,CAC3B,MAAOU,cAAa,kBAAb,CAAiCV,GAAjC,CAAP,CACH,CAED;;;;;;;OAQA,QAASoB,UAAT,CAAmBpB,GAAnB,CAAwB,CACpB,MAAOU,cAAa,WAAb,CAA0BV,GAA1B,CAAP,CACH,CAED;;;;;;OAOA,QAASqB,QAAT,CAAiBrB,GAAjB,CAAsB,CAClB,MAAOU,cAAa,SAAb,CAAwBV,GAAxB,CAAP,CACH,CAED;;;;;;;OAQA,QAASsB,QAAT,CAAiBtB,GAAjB,CAAsBY,OAAtB,CAA+B,CAC3B,MAAOF,cAAa,SAAb,CAAwBV,GAAxB,CAA6BY,OAA7B,CAAP,CACH,CAEDN,QACAX,SAAW,CACPa,iBAAoBA,gBADb,CAEPK,aAAoBA,YAFb,CAGPC,YAAoBA,WAHb,CAIPE,YAAoBA,WAJb,CAKPC,WAAoBA,UALb,CAMPC,eAAoBA,cANb,CAOPC,iBAAoBA,gBAPb,CAQPC,UAAoBA,SARb,CASPC,QAAoBA,OATb,CAUPN,eAAoBA,cAVb,CAWPO,QAAoBA,OAXb,CAAX,CAcA,MAAO3B,SAAP,CACH,CAEDD,SAAS6B,qBAAT,CAAiC,UAAjC,CACA,GAAMC,SAAUC,uBAAaC,mBAAb,CAAiChC,QAAjC,CAAhB,C,gBACe8B,O","file":"URLUtils.js","sourcesContent":["/**\n * The copyright in this software is being made available under the BSD License,\n * included below. This software may be subject to other third party and contributor\n * rights, including patent rights, and no such rights are granted under this license.\n *\n * Copyright (c) 2013, Dash Industry Forum.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *  * Redistributions of source code must retain the above copyright notice, this\n *  list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above copyright notice,\n *  this list of conditions and the following disclaimer in the documentation and/or\n *  other materials provided with the distribution.\n *  * Neither the name of Dash Industry Forum nor the names of its\n *  contributors may be used to endorse or promote products derived from this software\n *  without specific prior written permission.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n *  POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport FactoryMaker from '../../core/FactoryMaker';\nimport DefaultURLUtils from './DefaultURLUtils';\n\n/**\n * @module URLUtils\n * @ignore\n * @description Provides utility functions for operating on URLs.\n * Initially this is simply a method to determine the Base URL of a URL, but\n * should probably include other things provided all over the place such as\n * determining whether a URL is relative/absolute, resolving two paths etc.\n */\nfunction URLUtils() {\n\n    let instance;\n    let defaultURLUtils;\n    let regexUtils = [];\n    const context = this.context;\n\n    function getUtils(url) {\n        let i;\n        for (i = 0; i < regexUtils.length; i++) {\n            let regex = regexUtils[i].regex;\n            if (regex.test(url)) {\n                return regexUtils[i].utils;\n            }\n        }\n        return defaultURLUtils;\n    }\n\n    function setup() {\n        defaultURLUtils = DefaultURLUtils(context).getInstance();\n    }\n\n    /**\n     * Register a module to handle specific url.\n     * @param {regex} regex - url regex\n     * @param {object} utils - object that handles the regex\n     * @memberof module:URLUtils\n     * @instance\n     */\n    function registerUrlRegex(regex, utils) {\n        regexUtils.push({regex: regex, utils: utils});\n    }\n\n    function internalCall(functionName, url, baseUrl) {\n        let utils = getUtils(baseUrl || url);\n        return utils && typeof (utils[functionName]) === 'function' ? utils[functionName](url, baseUrl) : defaultURLUtils[functionName](url, baseUrl);\n    }\n\n    /**\n     * Returns a string that contains the Base URL of a URL, if determinable.\n     * @param {string} url - full url\n     * @return {string}\n     * @memberof module:URLUtils\n     * @instance\n     */\n    function parseBaseUrl(url) {\n        return internalCall('parseBaseUrl', url);\n    }\n\n    /**\n     * Returns a string that contains the scheme and origin of a URL,\n     * if determinable.\n     * @param {string} url - full url\n     * @return {string}\n     * @memberof module:URLUtils\n     * @instance\n     */\n    function parseOrigin(url) {\n        return internalCall('parseOrigin', url);\n    }\n\n    /**\n     * Returns a string that contains the fragment of a URL without scheme,\n     * if determinable.\n     * @param {string} url - full url\n     * @return {string}\n     * @memberof module:URLUtils\n     * @instance\n     */\n    function removeHostname(url) {\n        return internalCall('removeHostname', url);\n    }\n\n    /**\n     * Returns a string that contains the scheme of a URL, if determinable.\n     * @param {string} url - full url\n     * @return {string}\n     * @memberof module:URLUtils\n     * @instance\n     */\n    function parseScheme(url) {\n        return internalCall('parseScheme', url);\n    }\n\n    /**\n     * Determines whether the url is relative.\n     * @return {boolean}\n     * @param {string} url\n     * @memberof module:URLUtils\n     * @instance\n     */\n    function isRelative(url) {\n        return internalCall('isRelative', url);\n    }\n\n    /**\n     * Determines whether the url is path-absolute.\n     * @return {bool}\n     * @param {string} url\n     * @memberof module:URLUtils\n     * @instance\n     */\n    function isPathAbsolute(url) {\n        return internalCall('isPathAbsolute', url);\n    }\n\n    /**\n     * Determines whether the url is scheme-relative.\n     * @return {bool}\n     * @param {string} url\n     * @memberof module:URLUtils\n     * @instance\n     */\n    function isSchemeRelative(url) {\n        return internalCall('isSchemeRelative', url);\n    }\n\n    /**\n     * Determines whether the url is an HTTP-URL as defined in ISO/IEC\n     * 23009-1:2014 3.1.15. ie URL with a fixed scheme of http or https\n     * @return {bool}\n     * @param {string} url\n     * @memberof module:URLUtils\n     * @instance\n     */\n    function isHTTPURL(url) {\n        return internalCall('isHTTPURL', url);\n    }\n\n    /**\n     * Determines whether the supplied url has https scheme\n     * @return {bool}\n     * @param {string} url\n     * @memberof module:URLUtils\n     * @instance\n     */\n    function isHTTPS(url) {\n        return internalCall('isHTTPS', url);\n    }\n\n    /**\n     * Resolves a url given an optional base url\n     * @return {string}\n     * @param {string} url\n     * @param {string} [baseUrl]\n     * @memberof module:URLUtils\n     * @instance\n     */\n    function resolve(url, baseUrl) {\n        return internalCall('resolve', url, baseUrl);\n    }\n\n    setup();\n    instance = {\n        registerUrlRegex:   registerUrlRegex,\n        parseBaseUrl:       parseBaseUrl,\n        parseOrigin:        parseOrigin,\n        parseScheme:        parseScheme,\n        isRelative:         isRelative,\n        isPathAbsolute:     isPathAbsolute,\n        isSchemeRelative:   isSchemeRelative,\n        isHTTPURL:          isHTTPURL,\n        isHTTPS:            isHTTPS,\n        removeHostname:     removeHostname,\n        resolve:            resolve\n    };\n\n    return instance;\n}\n\nURLUtils.__dashjs_factory_name = 'URLUtils';\nconst factory = FactoryMaker.getSingletonFactory(URLUtils);\nexport default factory;\n"]}