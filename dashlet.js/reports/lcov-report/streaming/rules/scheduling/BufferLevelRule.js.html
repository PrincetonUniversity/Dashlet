<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for streaming/rules/scheduling/BufferLevelRule.js</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../../../prettify.css" />
    <link rel="stylesheet" href="../../../base.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../../../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class='wrapper'>
  <div class='pad1'>
    <h1>
      <a href="../../../index.html">all files</a> / <a href="index.html">streaming/rules/scheduling/</a> BufferLevelRule.js
    </h1>
    <div class='clearfix'>
      <div class='fl pad1y space-right2'>
        <span class="strong">91.11% </span>
        <span class="quiet">Statements</span>
        <span class='fraction'>41/45</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">73.08% </span>
        <span class="quiet">Branches</span>
        <span class='fraction'>19/26</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">100% </span>
        <span class="quiet">Functions</span>
        <span class='fraction'>5/5</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">90.91% </span>
        <span class="quiet">Lines</span>
        <span class='fraction'>40/44</span>
      </div>
      <div class='fl pad1y'>
        <span class="strong">1 branch</span>
        <span class="quiet">Ignored</span>  &nbsp;&nbsp;&nbsp;&nbsp;
      </div>
    </div>
  </div>
  <div class='status-line high'></div>
<pre><table class="coverage">
<tr><td class="line-count quiet">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117</td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">8×</span>
<span class="cline-any cline-yes">8×</span>
<span class="cline-any cline-yes">8×</span>
<span class="cline-any cline-yes">8×</span>
<span class="cline-any cline-yes">8×</span>
<span class="cline-any cline-yes">8×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">7×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">7×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">5×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">5×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">8×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">8×</span>
<span class="cline-any cline-yes">8×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">/**
 * The copyright in this software is being made available under the BSD License,
 * included below. This software may be subject to other third party and contributor
 * rights, including patent rights, and no such rights are granted under this license.
 *
 * Copyright (c) 2013, Dash Industry Forum.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *  * Redistributions of source code must retain the above copyright notice, this
 *  list of conditions and the following disclaimer.
 *  * Redistributions in binary form must reproduce the above copyright notice,
 *  this list of conditions and the following disclaimer in the documentation and/or
 *  other materials provided with the distribution.
 *  * Neither the name of Dash Industry Forum nor the names of its
 *  contributors may be used to endorse or promote products derived from this software
 *  without specific prior written permission.
 *
 *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY
 *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT
 *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,
 *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 *  POSSIBILITY OF SUCH DAMAGE.
 */
'use strict';
&nbsp;
Object.defineProperty(exports, '__esModule', {
    value: true
});
// istanbul ignore next
&nbsp;
function _interopRequireDefault(obj) { return obj &amp;&amp; obj.__esModule ? <span class="branch-0 cbranch-skip" title="branch not covered" >obj </span>: { 'default': obj }; }
&nbsp;
var _constantsConstants = require('../../constants/Constants');
&nbsp;
var _constantsConstants2 = _interopRequireDefault(_constantsConstants);
&nbsp;
var _coreFactoryMaker = require('../../../core/FactoryMaker');
&nbsp;
var _coreFactoryMaker2 = _interopRequireDefault(_coreFactoryMaker);
&nbsp;
var _constantsMetricsConstants = require('../../constants/MetricsConstants');
&nbsp;
var _constantsMetricsConstants2 = _interopRequireDefault(_constantsMetricsConstants);
&nbsp;
function BufferLevelRule(config) {
&nbsp;
    config = config || <span class="branch-1 cbranch-no" title="branch not covered" >{};</span>
    var dashMetrics = config.dashMetrics;
    var mediaPlayerModel = config.mediaPlayerModel;
    var textController = config.textController;
    var abrController = config.abrController;
    var settings = config.settings;
&nbsp;
    function setup() {}
&nbsp;
    function execute(type, representationInfo) {
        if (!type || !representationInfo) {
            return true;
        }
        var bufferLevel = dashMetrics.getCurrentBufferLevel(type);
        return bufferLevel &lt; getBufferTarget(type, representationInfo);
    }
&nbsp;
    function getBufferTarget(type, representationInfo) {
        var bufferTarget = NaN;
&nbsp;
        if (!type || !representationInfo) {
            return bufferTarget;
        }
&nbsp;
        if (type === _constantsConstants2['default'].FRAGMENTED_TEXT) {
            if (textController.isTextEnabled()) {
                <span class="missing-if-branch" title="if path not taken" >I</span>if (isNaN(representationInfo.fragmentDuration)) {
                    //fragmentDuration of representationInfo is not defined,
                    // call metrics function to have data in the latest scheduling info...
                    // if no metric, returns 0. In this case, rule will return false.
<span class="cstat-no" title="statement not covered" >                    var schedulingInfo = dashMetrics.getCurrentSchedulingInfo(_constantsMetricsConstants2['default'].SCHEDULING_INFO);</span>
<span class="cstat-no" title="statement not covered" >                    bufferTarget = schedulingInfo ? schedulingInfo.duration : 0;</span>
                } else {
                    bufferTarget = representationInfo.fragmentDuration;
                }
            } else {
                // text is disabled, rule will return false
                bufferTarget = 0;
            }
        } else {
            var streamInfo = representationInfo.mediaInfo.streamInfo;
            <span class="missing-if-branch" title="if path not taken" >I</span>if (abrController.isPlayingAtTopQuality(streamInfo)) {
<span class="cstat-no" title="statement not covered" >                var isLongFormContent = streamInfo.manifestInfo.duration &gt;= settings.get().streaming.longFormContentDurationThreshold;</span>
<span class="cstat-no" title="statement not covered" >                bufferTarget = isLongFormContent ? settings.get().streaming.bufferTimeAtTopQualityLongForm : settings.get().streaming.bufferTimeAtTopQuality;</span>
            } else {
                bufferTarget = mediaPlayerModel.getStableBufferTime();
            }
        }
        return bufferTarget;
    }
&nbsp;
    var instance = {
        execute: execute,
        getBufferTarget: getBufferTarget
    };
&nbsp;
    setup();
    return instance;
}
&nbsp;
BufferLevelRule.__dashjs_factory_name = 'BufferLevelRule';
exports['default'] = _coreFactoryMaker2['default'].getClassFactory(BufferLevelRule);
module.exports = exports['default'];
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2FjZXIvRG9jdW1lbnRzL2Rhc2guanMtbWFzdGVyL3NyYy9zdHJlYW1pbmcvcnVsZXMvc2NoZWR1bGluZy9CdWZmZXJMZXZlbFJ1bGUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O2tDQThCc0IsMkJBQTJCOzs7O2dDQUN4Qiw0QkFBNEI7Ozs7eUNBQ3hCLGtDQUFrQzs7OztBQUUvRCxTQUFTLGVBQWUsQ0FBQyxNQUFNLEVBQUU7O0FBRTdCLFVBQU0sR0FBRyxNQUFNLElBQUksRUFBRSxDQUFDO0FBQ3RCLFFBQU0sV0FBVyxHQUFHLE1BQU0sQ0FBQyxXQUFXLENBQUM7QUFDdkMsUUFBTSxnQkFBZ0IsR0FBRyxNQUFNLENBQUMsZ0JBQWdCLENBQUM7QUFDakQsUUFBTSxjQUFjLEdBQUcsTUFBTSxDQUFDLGNBQWMsQ0FBQztBQUM3QyxRQUFNLGFBQWEsR0FBRyxNQUFNLENBQUMsYUFBYSxDQUFDO0FBQzNDLFFBQU0sUUFBUSxHQUFHLE1BQU0sQ0FBQyxRQUFRLENBQUM7O0FBRWpDLGFBQVMsS0FBSyxHQUFHLEVBQ2hCOztBQUVELGFBQVMsT0FBTyxDQUFDLElBQUksRUFBRSxrQkFBa0IsRUFBRTtBQUN2QyxZQUFJLENBQUMsSUFBSSxJQUFJLENBQUMsa0JBQWtCLEVBQUU7QUFDOUIsbUJBQU8sSUFBSSxDQUFDO1NBQ2Y7QUFDRCxZQUFNLFdBQVcsR0FBRyxXQUFXLENBQUMscUJBQXFCLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDNUQsZUFBTyxXQUFXLEdBQUcsZUFBZSxDQUFDLElBQUksRUFBRSxrQkFBa0IsQ0FBQyxDQUFDO0tBQ2xFOztBQUVELGFBQVMsZUFBZSxDQUFDLElBQUksRUFBRSxrQkFBa0IsRUFBRTtBQUMvQyxZQUFJLFlBQVksR0FBRyxHQUFHLENBQUM7O0FBRXZCLFlBQUksQ0FBQyxJQUFJLElBQUksQ0FBQyxrQkFBa0IsRUFBRTtBQUM5QixtQkFBTyxZQUFZLENBQUM7U0FDdkI7O0FBRUQsWUFBSSxJQUFJLEtBQUssZ0NBQVUsZUFBZSxFQUFFO0FBQ3BDLGdCQUFJLGNBQWMsQ0FBQyxhQUFhLEVBQUUsRUFBRTtBQUNoQyxvQkFBSSxLQUFLLENBQUMsa0JBQWtCLENBQUMsZ0JBQWdCLENBQUMsRUFBRTs7OztBQUc1Qyx3QkFBTSxjQUFjLEdBQUcsV0FBVyxDQUFDLHdCQUF3QixDQUFDLHVDQUFpQixlQUFlLENBQUMsQ0FBQztBQUM5RixnQ0FBWSxHQUFHLGNBQWMsR0FBRyxjQUFjLENBQUMsUUFBUSxHQUFHLENBQUMsQ0FBQztpQkFDL0QsTUFBTTtBQUNILGdDQUFZLEdBQUcsa0JBQWtCLENBQUMsZ0JBQWdCLENBQUM7aUJBQ3REO2FBQ0osTUFBTTs7QUFDSCw0QkFBWSxHQUFHLENBQUMsQ0FBQzthQUNwQjtTQUNKLE1BQU87QUFDSixnQkFBTSxVQUFVLEdBQUcsa0JBQWtCLENBQUMsU0FBUyxDQUFDLFVBQVUsQ0FBQztBQUMzRCxnQkFBSSxhQUFhLENBQUMscUJBQXFCLENBQUMsVUFBVSxDQUFDLEVBQUU7QUFDakQsb0JBQU0saUJBQWlCLEdBQUcsVUFBVSxDQUFDLFlBQVksQ0FBQyxRQUFRLElBQUksUUFBUSxDQUFDLEdBQUcsRUFBRSxDQUFDLFNBQVMsQ0FBQyxnQ0FBZ0MsQ0FBQztBQUN4SCw0QkFBWSxHQUFHLGlCQUFpQixHQUFHLFFBQVEsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxTQUFTLENBQUMsOEJBQThCLEdBQUcsUUFBUSxDQUFDLEdBQUcsRUFBRSxDQUFDLFNBQVMsQ0FBQyxzQkFBc0IsQ0FBQzthQUNoSixNQUFNO0FBQ0gsNEJBQVksR0FBRyxnQkFBZ0IsQ0FBQyxtQkFBbUIsRUFBRSxDQUFDO2FBQ3pEO1NBQ0o7QUFDRCxlQUFPLFlBQVksQ0FBQztLQUN2Qjs7QUFFRCxRQUFNLFFBQVEsR0FBRztBQUNiLGVBQU8sRUFBRSxPQUFPO0FBQ2hCLHVCQUFlLEVBQUUsZUFBZTtLQUNuQyxDQUFDOztBQUVGLFNBQUssRUFBRSxDQUFDO0FBQ1IsV0FBTyxRQUFRLENBQUM7Q0FDbkI7O0FBRUQsZUFBZSxDQUFDLHFCQUFxQixHQUFHLGlCQUFpQixDQUFDO3FCQUMzQyw4QkFBYSxlQUFlLENBQUMsZUFBZSxDQUFDIiwiZmlsZSI6Ii9ob21lL2FjZXIvRG9jdW1lbnRzL2Rhc2guanMtbWFzdGVyL3NyYy9zdHJlYW1pbmcvcnVsZXMvc2NoZWR1bGluZy9CdWZmZXJMZXZlbFJ1bGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFRoZSBjb3B5cmlnaHQgaW4gdGhpcyBzb2Z0d2FyZSBpcyBiZWluZyBtYWRlIGF2YWlsYWJsZSB1bmRlciB0aGUgQlNEIExpY2Vuc2UsXG4gKiBpbmNsdWRlZCBiZWxvdy4gVGhpcyBzb2Z0d2FyZSBtYXkgYmUgc3ViamVjdCB0byBvdGhlciB0aGlyZCBwYXJ0eSBhbmQgY29udHJpYnV0b3JcbiAqIHJpZ2h0cywgaW5jbHVkaW5nIHBhdGVudCByaWdodHMsIGFuZCBubyBzdWNoIHJpZ2h0cyBhcmUgZ3JhbnRlZCB1bmRlciB0aGlzIGxpY2Vuc2UuXG4gKlxuICogQ29weXJpZ2h0IChjKSAyMDEzLCBEYXNoIEluZHVzdHJ5IEZvcnVtLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBSZWRpc3RyaWJ1dGlvbiBhbmQgdXNlIGluIHNvdXJjZSBhbmQgYmluYXJ5IGZvcm1zLCB3aXRoIG9yIHdpdGhvdXQgbW9kaWZpY2F0aW9uLFxuICogYXJlIHBlcm1pdHRlZCBwcm92aWRlZCB0aGF0IHRoZSBmb2xsb3dpbmcgY29uZGl0aW9ucyBhcmUgbWV0OlxuICogICogUmVkaXN0cmlidXRpb25zIG9mIHNvdXJjZSBjb2RlIG11c3QgcmV0YWluIHRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlLCB0aGlzXG4gKiAgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIuXG4gKiAgKiBSZWRpc3RyaWJ1dGlvbnMgaW4gYmluYXJ5IGZvcm0gbXVzdCByZXByb2R1Y2UgdGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UsXG4gKiAgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lciBpbiB0aGUgZG9jdW1lbnRhdGlvbiBhbmQvb3JcbiAqICBvdGhlciBtYXRlcmlhbHMgcHJvdmlkZWQgd2l0aCB0aGUgZGlzdHJpYnV0aW9uLlxuICogICogTmVpdGhlciB0aGUgbmFtZSBvZiBEYXNoIEluZHVzdHJ5IEZvcnVtIG5vciB0aGUgbmFtZXMgb2YgaXRzXG4gKiAgY29udHJpYnV0b3JzIG1heSBiZSB1c2VkIHRvIGVuZG9yc2Ugb3IgcHJvbW90ZSBwcm9kdWN0cyBkZXJpdmVkIGZyb20gdGhpcyBzb2Z0d2FyZVxuICogIHdpdGhvdXQgc3BlY2lmaWMgcHJpb3Igd3JpdHRlbiBwZXJtaXNzaW9uLlxuICpcbiAqICBUSElTIFNPRlRXQVJFIElTIFBST1ZJREVEIEJZIFRIRSBDT1BZUklHSFQgSE9MREVSUyBBTkQgQ09OVFJJQlVUT1JTIEFTIElTIEFORCBBTllcbiAqICBFWFBSRVNTIE9SIElNUExJRUQgV0FSUkFOVElFUywgSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sIFRIRSBJTVBMSUVEXG4gKiAgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkgQU5EIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFSRSBESVNDTEFJTUVELlxuICogIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBDT1BZUklHSFQgSE9MREVSIE9SIENPTlRSSUJVVE9SUyBCRSBMSUFCTEUgRk9SIEFOWSBESVJFQ1QsXG4gKiAgSU5ESVJFQ1QsIElOQ0lERU5UQUwsIFNQRUNJQUwsIEVYRU1QTEFSWSwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIChJTkNMVURJTkcsIEJVVFxuICogIE5PVCBMSU1JVEVEIFRPLCBQUk9DVVJFTUVOVCBPRiBTVUJTVElUVVRFIEdPT0RTIE9SIFNFUlZJQ0VTOyBMT1NTIE9GIFVTRSwgREFUQSwgT1JcbiAqICBQUk9GSVRTOyBPUiBCVVNJTkVTUyBJTlRFUlJVUFRJT04pIEhPV0VWRVIgQ0FVU0VEIEFORCBPTiBBTlkgVEhFT1JZIE9GIExJQUJJTElUWSxcbiAqICBXSEVUSEVSIElOIENPTlRSQUNULCBTVFJJQ1QgTElBQklMSVRZLCBPUiBUT1JUIChJTkNMVURJTkcgTkVHTElHRU5DRSBPUiBPVEhFUldJU0UpXG4gKiAgQVJJU0lORyBJTiBBTlkgV0FZIE9VVCBPRiBUSEUgVVNFIE9GIFRISVMgU09GVFdBUkUsIEVWRU4gSUYgQURWSVNFRCBPRiBUSEVcbiAqICBQT1NTSUJJTElUWSBPRiBTVUNIIERBTUFHRS5cbiAqL1xuaW1wb3J0IENvbnN0YW50cyBmcm9tICcuLi8uLi9jb25zdGFudHMvQ29uc3RhbnRzJztcbmltcG9ydCBGYWN0b3J5TWFrZXIgZnJvbSAnLi4vLi4vLi4vY29yZS9GYWN0b3J5TWFrZXInO1xuaW1wb3J0IE1ldHJpY3NDb25zdGFudHMgZnJvbSAnLi4vLi4vY29uc3RhbnRzL01ldHJpY3NDb25zdGFudHMnO1xuXG5mdW5jdGlvbiBCdWZmZXJMZXZlbFJ1bGUoY29uZmlnKSB7XG5cbiAgICBjb25maWcgPSBjb25maWcgfHwge307XG4gICAgY29uc3QgZGFzaE1ldHJpY3MgPSBjb25maWcuZGFzaE1ldHJpY3M7XG4gICAgY29uc3QgbWVkaWFQbGF5ZXJNb2RlbCA9IGNvbmZpZy5tZWRpYVBsYXllck1vZGVsO1xuICAgIGNvbnN0IHRleHRDb250cm9sbGVyID0gY29uZmlnLnRleHRDb250cm9sbGVyO1xuICAgIGNvbnN0IGFickNvbnRyb2xsZXIgPSBjb25maWcuYWJyQ29udHJvbGxlcjtcbiAgICBjb25zdCBzZXR0aW5ncyA9IGNvbmZpZy5zZXR0aW5ncztcblxuICAgIGZ1bmN0aW9uIHNldHVwKCkge1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGV4ZWN1dGUodHlwZSwgcmVwcmVzZW50YXRpb25JbmZvKSB7XG4gICAgICAgIGlmICghdHlwZSB8fCAhcmVwcmVzZW50YXRpb25JbmZvKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBidWZmZXJMZXZlbCA9IGRhc2hNZXRyaWNzLmdldEN1cnJlbnRCdWZmZXJMZXZlbCh0eXBlKTtcbiAgICAgICAgcmV0dXJuIGJ1ZmZlckxldmVsIDwgZ2V0QnVmZmVyVGFyZ2V0KHR5cGUsIHJlcHJlc2VudGF0aW9uSW5mbyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0QnVmZmVyVGFyZ2V0KHR5cGUsIHJlcHJlc2VudGF0aW9uSW5mbykge1xuICAgICAgICBsZXQgYnVmZmVyVGFyZ2V0ID0gTmFOO1xuXG4gICAgICAgIGlmICghdHlwZSB8fCAhcmVwcmVzZW50YXRpb25JbmZvKSB7XG4gICAgICAgICAgICByZXR1cm4gYnVmZmVyVGFyZ2V0O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHR5cGUgPT09IENvbnN0YW50cy5GUkFHTUVOVEVEX1RFWFQpIHtcbiAgICAgICAgICAgIGlmICh0ZXh0Q29udHJvbGxlci5pc1RleHRFbmFibGVkKCkpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNOYU4ocmVwcmVzZW50YXRpb25JbmZvLmZyYWdtZW50RHVyYXRpb24pKSB7IC8vZnJhZ21lbnREdXJhdGlvbiBvZiByZXByZXNlbnRhdGlvbkluZm8gaXMgbm90IGRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgIC8vIGNhbGwgbWV0cmljcyBmdW5jdGlvbiB0byBoYXZlIGRhdGEgaW4gdGhlIGxhdGVzdCBzY2hlZHVsaW5nIGluZm8uLi5cbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgbm8gbWV0cmljLCByZXR1cm5zIDAuIEluIHRoaXMgY2FzZSwgcnVsZSB3aWxsIHJldHVybiBmYWxzZS5cbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2NoZWR1bGluZ0luZm8gPSBkYXNoTWV0cmljcy5nZXRDdXJyZW50U2NoZWR1bGluZ0luZm8oTWV0cmljc0NvbnN0YW50cy5TQ0hFRFVMSU5HX0lORk8pO1xuICAgICAgICAgICAgICAgICAgICBidWZmZXJUYXJnZXQgPSBzY2hlZHVsaW5nSW5mbyA/IHNjaGVkdWxpbmdJbmZvLmR1cmF0aW9uIDogMDtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBidWZmZXJUYXJnZXQgPSByZXByZXNlbnRhdGlvbkluZm8uZnJhZ21lbnREdXJhdGlvbjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgeyAvLyB0ZXh0IGlzIGRpc2FibGVkLCBydWxlIHdpbGwgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgICAgICAgYnVmZmVyVGFyZ2V0ID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBzdHJlYW1JbmZvID0gcmVwcmVzZW50YXRpb25JbmZvLm1lZGlhSW5mby5zdHJlYW1JbmZvO1xuICAgICAgICAgICAgaWYgKGFickNvbnRyb2xsZXIuaXNQbGF5aW5nQXRUb3BRdWFsaXR5KHN0cmVhbUluZm8pKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaXNMb25nRm9ybUNvbnRlbnQgPSBzdHJlYW1JbmZvLm1hbmlmZXN0SW5mby5kdXJhdGlvbiA+PSBzZXR0aW5ncy5nZXQoKS5zdHJlYW1pbmcubG9uZ0Zvcm1Db250ZW50RHVyYXRpb25UaHJlc2hvbGQ7XG4gICAgICAgICAgICAgICAgYnVmZmVyVGFyZ2V0ID0gaXNMb25nRm9ybUNvbnRlbnQgPyBzZXR0aW5ncy5nZXQoKS5zdHJlYW1pbmcuYnVmZmVyVGltZUF0VG9wUXVhbGl0eUxvbmdGb3JtIDogc2V0dGluZ3MuZ2V0KCkuc3RyZWFtaW5nLmJ1ZmZlclRpbWVBdFRvcFF1YWxpdHk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGJ1ZmZlclRhcmdldCA9IG1lZGlhUGxheWVyTW9kZWwuZ2V0U3RhYmxlQnVmZmVyVGltZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBidWZmZXJUYXJnZXQ7XG4gICAgfVxuXG4gICAgY29uc3QgaW5zdGFuY2UgPSB7XG4gICAgICAgIGV4ZWN1dGU6IGV4ZWN1dGUsXG4gICAgICAgIGdldEJ1ZmZlclRhcmdldDogZ2V0QnVmZmVyVGFyZ2V0XG4gICAgfTtcblxuICAgIHNldHVwKCk7XG4gICAgcmV0dXJuIGluc3RhbmNlO1xufVxuXG5CdWZmZXJMZXZlbFJ1bGUuX19kYXNoanNfZmFjdG9yeV9uYW1lID0gJ0J1ZmZlckxldmVsUnVsZSc7XG5leHBvcnQgZGVmYXVsdCBGYWN0b3J5TWFrZXIuZ2V0Q2xhc3NGYWN0b3J5KEJ1ZmZlckxldmVsUnVsZSk7XG4iXX0=</pre></td></tr>
</table></pre>
<div class='push'></div><!-- for sticky footer -->
</div><!-- /wrapper -->
<div class='footer quiet pad2 space-top1 center small'>
  Code coverage
  generated by <a href="http://istanbul-js.org/" target="_blank">istanbul</a> at Sat Nov 14 2020 00:39:07 GMT-0500 (EST)
</div>
</div>
<script src="../../../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../../../sorter.js"></script>
</body>
</html>
